### Run ###

`./gradlew run --console=plain`

### Architecture ###

https://drive.google.com/file/d/1hQdNZnXyPr_hBnZ--pvhTXHbayCeAU9l/view?usp=sharing

### Описание архитектуры ###

За подстановку переменных окружения отвечает блок `Substitute`, реализованный в виде конечного автомата. 

Переменные окружения хранятся в `Environment`. При создании в `Environment` записываются все внешние переменные окружения.

После подстановки переменных окружения происходит парсинг. Для него использую `ANTLR`. В результате парсинга получаю список `Executable` объектов -- команды в пайплайне.

Каждая команда реализует интерфейс `Executable`. Конструктор принимает аргументы, а метод `execute` -- набор стримов.

Объекты `Executable` создаются с помощью фабрики.

Команда `pwd` принимает `Environment`, так как должна получать текущую директорию (а логика её получения находится там), а команда `exit` принимает `Shell`, так как должна завершать его.

Далее в работу вступает `Executor`. Он поочерёдно, в одном потоке, запускает все команды из пайпа. Если код возврата какой-либо команды отличен от 0, исполнение прекращается и возвращается этот код.

### Комментарии от Саши ###

В целом норм, учитывая, что мне не нужно было разбираться, как тут парсер работает.

Из того, что всё же не понравилось:

* Писать `try` и `catch` каждый раз, когда выводишь в OutputStream
* Переопределять `equals` для каждой команды (я знаю, что это для тестов, но всё равно ужасно)
